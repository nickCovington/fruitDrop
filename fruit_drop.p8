pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
basket_sprite = 1

player_sprite = 2
player_x = 64
player_y = 104

fruits = {}
fruit_start = 16
fruit_count = 5
fruit_interval = 16

gravity = 1

level = 1
points = 0

function _init()
	for i=1, level do
		fruit = {
			sprite = flr(rnd(fruit_count) + fruit_start), 
			x= flr(rnd(120) + 5),
			y= i * (-fruit_interval)
		}
		add(fruits, fruit)
	end
end

function _update()
	if (btn(0)) then
		if (player_x > 4) then
			player_x -= 3
			alternate_sprite()
		end
	end
	
	if (btn(1)) then
		if (player_x < 123) then
			player_x += 3
			alternate_sprite()
		end
	end
	
	for fruit in all(fruits) do
		fruit.y += gravity
		
		-- catch fruit in basket
		if fruit.y +4 > player_y -8
		and fruit.y +4 < player_y
		and fruit.x +4 > player_x
		and fruit.x +4 < player_x +8 then
			points += 1
			del(fruits, fruit)
			sfx(0)
		end
		
		-- fruit splats on ground
		if fruit.y > 100 then
			del(fruits, fruit)
			sfx(1)
		end
	end
	
	if #fruits == 0 then
		level += 1
		_init()
	end
	
end

function _draw()
	cls()
	map(0, 0, 0, 0, 127, 127)
	spr(player_sprite, player_x, player_y)
	spr(basket_sprite, player_x, player_y - 8)

	for fruit in all(fruits) do
		spr(fruit.sprite, fruit.x, fruit.y)
	end
	
	print("collected: "..points, 0, 0, 10)
end

function alternate_sprite()
	if (player_sprite == 2) then
		player_sprite += 1
	elseif (player_sprite ==3) then
		player_sprite -= 1
	end
end
__gfx__
0000000004444440e00000e0e00000e0000000000000000000000000000000001717171700000000000a00000000000000000000000000000000000000000000
0000000040000004e00000e0e00000e0000000000000000000000000000000a07cccccc100a00000000000000000000000000000000000000000000000000000
0070070049999994e0eee0e0e0eee0e0000000000000000000000000000000001cccccc7000000000000000a0000000000000000000000000000000000000000
00077000444444440edede000edede000000000000000000000000000a0000007cccccc100007777777770000000000000000000000000000000000000000000
0007700049999994eeeeeee0eeeeeee0000000000000000000000000000000001cccccc700077775777577000000000000000000000000000000000000000000
0070070044444444eeeeeee0eeeeeee0000000000000000000000000000000007cccccc107707777777777700000000000000000000000000000000000000000
0000000049999994003030000330330000000000000000000000000000000a001cccccc707770000000000700000000000000000000000000000000000000000
00000000044444400330330000000000000000000000000000000000000000007171717107570777070770700000000000000000000000000000000000000000
30330000000003000000300003000300000003000000000000000000000000000000000007777000777007700000000000000000000000000000000000000000
03300720000033300883388830303000000083300000000000000000000000000000000007577777775777700000000000000000000000000000000000000000
33400220000993008883388700303000000808b30000000000000000000000000000000007777777777775700000000000000000000000000000000000000000
3007240000999330888888880fffff00008888830000000000000000000000000000000000777707770777000000000000000000000000000000000000000000
00022000099a900088888888ffff6fff080808370000000000000000000000000000000000075770007757000000000000000000000000000000000000000000
0724072009a9000088888888fffff6ff888888b00000000000000000000000000000000000077777777770000000000000000000000000000000000000000000
022002209990000008888880fffffff0b388b330000000000000000000000000000000000a0000000000000a0000000000000000000000000000000000000000
0000000099000000008808800ffffff003b330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0606060606060506070607060706070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06070607060706070607060706090a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07060706070607060706070606191a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0600000006000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060606060606060606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060606060606060606060606060606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400001305100001230510000133001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001
001000000c31300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003
